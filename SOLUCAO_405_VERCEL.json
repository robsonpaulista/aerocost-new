# üîß Solu√ß√£o: Erro 405 - Vercel n√£o roteia para Express

## ‚ùå Problema

- Erro 405 (Method Not Allowed) no login
- Vercel n√£o tem logs da autentica√ß√£o
- Requisi√ß√µes `/api/*` n√£o chegam ao Express

## ‚úÖ Solu√ß√£o Aplicada

1. **Movido `vercel.json` para a raiz do projeto**
   - O Vercel precisa do `vercel.json` na raiz quando h√° m√∫ltiplos builds
   - Caminhos relativos agora s√£o corretos

2. **Configura√ß√£o do `vercel.json` na raiz:**
   ```json
   {
     "version": 2,
     "builds": [
       {
         "src": "frontend/package.json",
         "use": "@vercel/next"
       },
       {
         "src": "api/index.js",
         "use": "@vercel/node"
       }
     ],
     "routes": [
       {
         "src": "/api/(.*)",
         "dest": "api/index.js"
       },
       {
         "src": "/(.*)",
         "dest": "frontend/$1"
       }
     ]
   }
   ```

## üìã Configura√ß√£o no Vercel Dashboard

**IMPORTANTE**: Com o `vercel.json` na raiz, voc√™ precisa ajustar:

1. Acesse: https://vercel.com/dashboard
2. V√° no projeto
3. **Settings** ‚Üí **General**
4. **Root Directory**: Deixe **VAZIO** (n√£o configure como `frontend`)
   - O `vercel.json` na raiz j√° define os caminhos corretos
5. **Framework Preset**: Deixe como `Other` ou `Next.js` (auto-detecta)

## üöÄ Pr√≥ximos Passos

1. Fa√ßa commit e push:
   ```bash
   git add vercel.json
   git rm frontend/vercel.json
   git commit -m "fix: mover vercel.json para raiz para corrigir roteamento do Express"
   git push origin main
   ```

2. No Vercel Dashboard:
   - **Remova o Root Directory** (deixe vazio)
   - Fa√ßa **Redeploy**

3. Teste novamente o login

## ‚úÖ Como Funciona Agora

- **Raiz do projeto**: `vercel.json` define todos os builds e rotas
- **Frontend**: Build do Next.js em `frontend/`
- **Backend**: Build do Express em `api/index.js`
- **Rotas `/api/*`**: V√£o direto para `api/index.js`
- **Outras rotas**: V√£o para o Next.js

---

**O erro 405 deve ser resolvido agora! ‚úÖ**

